{% extends "base.html" %} {% block content %}
<section class="text-gray-700 body-font overflow-hidden bg-white">
  <div class="container px-5 py-24 mx-auto">
    <div class="mx-auto flex flex-wrap items-center">
      <div class="lg:w-1/2 w-full relative overflow-hidden">
        <div id="mainImageContainer" class="w-full relative flex transition-transform duration-500 ease-linear">
            <img
                id="mainImage"
                alt="ecommerce"
                class="main-image w-full object-cover object-center rounded border border-gray-200"
                src="{{item.mainimage.url}}" 
            />
            <img
                class="main-image w-full object-cover object-center rounded border border-gray-200"
                src="{{item.mainimage.url}}" 
                alt="Image 2"
            />
            <img
                class="main-image w-full object-cover object-center rounded border border-gray-200"
                src="{{item.mainimage.url}}" 
                alt="Image 3"
            />
        </div>
  
        <div class="flex flex-wrap mt-4 justify-between px-14 mt-10 gap-5 relative">
            <img
                class="thumbnail w-44 object-cover object-center rounded border border-gray-200 cursor-pointer"
                src="{{item.mainimage.url}}" 
                alt="Thumbnail 1"
            />
            <img
                class="thumbnail w-44 object-cover object-center rounded border border-gray-200 cursor-pointer"
                src="{{item.mainimage.url}}" 
                alt="Thumbnail 2"
            />
            <img
                class="thumbnail w-44 object-cover object-center rounded border border-gray-200 cursor-pointer"
                src="{{item.mainimage.url}}" 
                alt="Thumbnail 3"
            />
    
            <!-- Previous and Next Buttons -->
            <button id="prev" class="absolute top-0 start-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none">
                <span class="inline-flex items-center justify-center w-14 h-14 rounded-full bg-white/30 dark:bg-gray-800/30 group-hover:bg-white/50 dark:group-hover:bg-gray-800/60 group-focus:ring-4 group-focus:ring-white dark:group-focus:ring-gray-800/70 group-focus:outline-none">
                    <svg class="w-6 h-6 text-white dark:text-gray-800 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 1 1 5l4 4"/>
                    </svg>
                    <span class="sr-only">Previous</span>
                </span>
            </button>
            <button id="next" class="absolute top-0 end-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none">
                <span class="inline-flex items-center justify-center w-14 h-14 rounded-full bg-white/30 dark:bg-gray-800/30 group-hover:bg-white/50 dark:group-hover:bg-gray-800/60 group-focus:ring-4 group-focus:ring-white dark:group-focus:ring-gray-800/70 group-focus:outline-none">
                    <svg class="w-6 h-6 text-white dark:text-gray-800" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4"/>
                    </svg>
                    <span class="sr-only">Next</span>
                </span>
            </button>
        </div>
    </div>
     
      <div class="lg:w-1/2 w-full lg:pl-10 lg:py-6 mt-6 lg:mt-0">
        <h1 class="text-black text-5xl leading-tight font-bold mb-1">
          {{item.title}}
        </h1>
        <h5 class="mt-5 text-2xl font-bold">{{item.price}}</h5>
        <p class="leading-relaxed text-2xl mt-10">
          {{ item.description|truncatewords:10 }}
          <form method="POST" action="{% url 'add_to_cart' item.id %}">
            {% csrf_token %}
            <div class="sm:order-1">
              <div class="flex h-8 w-10 mt-5 justify-start text-gray-600">
                <button type='button' id="decrease" class="flex items-center justify-center rounded-l-md bg-gray-200 text-black px-4 transition hover:bg-black hover:text-white">-</button>
                <input type="number" id="quantity" name="quantity" value="1" min="1" class="flex w-16 items-center justify-center bg-gray-100 text-black text-xl text-center transition" readonly>
                <button type='button' id="increase" class="flex items-center justify-center rounded-r-md bg-gray-200 px-4 transition hover:bg-black hover:text-white">+</button>
              </div>
            </div>
          
            <button class="text-white w-full bg-black text-xl font-bold mt-4 py-5 focus:outline-none hover:bg-red-600 rounded">Buy Now</button>
          </form>
        
        <h1 class='font-bold text-xl mt-5'>Guaranteed Safe Checkout</h1>
        <img class='mt-1' src="https://i.postimg.cc/wMRK94bc/Screenshot-2024-10-26-014120.png" alt="">
      </div>
    </div>
    <div class="mt-40">
      <a class='text-2xl font-semibold border-b-2 border-black pb-2' href="">Description</a>
     </div>
     <p class="leading-relaxed text-2xl mt-10 px-20">
      {{ item.description }}
    </p>
    <div class='flex justify-center items-center gap-10 mt-16 px-10'>
      <img class='w-1/3 h-64' src="{{item.desimage1.url}}" alt="">
      <img class='w-1/3 h-64' src="{{item.desimage2.url}}" alt="">
      <img class='w-1/3 h-64' src="{{item.desimage3.url}}" alt="">
    </div>
  </div>
 
</section>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const quantityInput = document.getElementById('quantity');
    const increaseButton = document.getElementById('increase');
    const decreaseButton = document.getElementById('decrease');

    increaseButton.addEventListener('click', function() {
      let currentQuantity = parseInt(quantityInput.value);
      quantityInput.value = currentQuantity + 1; // Increment the quantity
    });

    decreaseButton.addEventListener('click', function() {
      let currentQuantity = parseInt(quantityInput.value);
      if (currentQuantity > 1) {
        quantityInput.value = currentQuantity - 1; // Decrement the quantity if greater than 1
      }
    });
  });
</script>


<style>
  #mainImageContainer {
      width: 300%; /* Set to 300% for three images side by side */
      display: flex; /* Use flexbox for horizontal layout */
      transition: transform 0.5s ease; /* Smooth slide transition */
  }
  .main-image {
      width: 33.3333%; /* Each image takes one-third of the container width */
      flex-shrink: 0; /* Prevent images from shrinking */
  }
</style>

<script>
  const thumbnails = document.querySelectorAll('.thumbnail');
  const mainImageContainer = document.getElementById('mainImageContainer');
  let currentIndex = 0;

  function updateMainImage(index) {
      mainImageContainer.style.transform = `translateX(-${index * (100 / thumbnails.length)}%)`;
  }

  document.getElementById('prev').addEventListener('click', () => {
      currentIndex = (currentIndex - 1 + thumbnails.length) % thumbnails.length;
      updateMainImage(currentIndex);
  });

  document.getElementById('next').addEventListener('click', () => {
      currentIndex = (currentIndex + 1) % thumbnails.length;
      updateMainImage(currentIndex);
  });

  thumbnails.forEach((thumbnail, index) => {
      thumbnail.addEventListener('click', () => {
          currentIndex = index;  // Set currentIndex to the thumbnail index
          updateMainImage(currentIndex);
      });
  });

  // Initialize the main image to the first thumbnail on load
  updateMainImage(currentIndex);
</script>
{% endblock %}

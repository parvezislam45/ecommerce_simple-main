{% extends "base.html" %} {% block content %}


<section class="text-gray-700 body-font overflow-hidden bg-white">
  <div class="container px-48 py-12 md:py-16 lg:py-24 mx-auto">
    <div class="flex flex-wrap items-start mx-auto">
      
      <!-- Main Image Container -->
      <div class="lg:w-2/4 w-full relative overflow-hidden mb-6 lg:mb-0">
        <div id="mainImageContainer" class="w-96 relative flex transition-transform duration-500 ease-linear">
          <img
            id="mainImage"
            alt="ecommerce"
            class="main-image w-full object-cover object-center rounded border border-gray-200"
            src="{{item.mainimage.url}}" 
          />
          <img
            class="main-image w-full object-cover object-center rounded border border-gray-200"
            src="{{item.mainimage.url}}" 
            alt="Image 2"
          />
          <img
            class="main-image w-full object-cover object-center rounded border border-gray-200"
            src="{{item.mainimage.url}}" 
            alt="Image 3"
          />
        </div>

        <!-- Thumbnails and Navigation Buttons -->
        <div class="flex flex-wrap justify-between px-4 md:px-8 lg:px-14 mt-6 gap-3 relative">
          <img
            class="thumbnail w-20 md:w-28 lg:w-32 object-cover object-center rounded border border-gray-200 cursor-pointer"
            src="{{item.mainimage.url}}" 
            alt="Thumbnail 1"
          />
          <img
            class="thumbnail w-20 md:w-28 lg:w-32 object-cover object-center rounded border border-gray-200 cursor-pointer"
            src="{{item.mainimage.url}}" 
            alt="Thumbnail 2"
          />
          <img
            class="thumbnail w-20 md:w-28 lg:w-32 object-cover object-center rounded border border-gray-200 cursor-pointer"
            src="{{item.mainimage.url}}" 
            alt="Thumbnail 3"
          />
          
          <!-- Previous and Next Buttons -->
          <button id="prev" class="absolute top-0 start-0 z-30 flex items-center justify-between h-full cursor-pointer group focus:outline-none">
            <span class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30 dark:bg-gray-800/30 group-hover:bg-white/50 dark:group-hover:bg-gray-800/60 group-focus:ring-4 group-focus:ring-white dark:group-focus:ring-gray-800/70">
              <svg class="w-4 h-4 lg:h-6 text-white dark:text-gray-800 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 1 1 5l4 4"/>
              </svg>
              <span class="sr-only">Previous</span>
            </span>
          </button>
          <button id="next" class="absolute top-0 end-0 z-30 flex items-center justify-between h-full cursor-pointer group focus:outline-none">
            <span class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30 dark:bg-gray-800/30 group-hover:bg-white/50 dark:group-hover:bg-gray-800/60 group-focus:ring-4 group-focus:ring-white dark:group-focus:ring-gray-800/70">
              <svg class="w-4 h-4 lg:h-6 text-white dark:text-gray-800" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4"/>
              </svg>
              <span class="sr-only">Next</span>
            </span>
          </button>
        </div>
      </div>

      <!-- Product Info Section -->
      <div class="lg:w-2/4 w-full lg:pl-10 lg:py-6 mt-6 lg:mt-0">
        <h1 class="text-black text-xl md:text-3xl font-bold mb-2 leading-8">
          {{item.title}}
        </h1>
        <h5 class="mt-3 md:mt-4 text-xl font-bold">$ {{item.price}}</h5>
        <p class="leading-relaxed text-lg mt-6 md:mt-8">
          {{ item.description|truncatewords:10 }}
        </p>
        
        <!-- Quantity Selection and Add to Cart Button -->
        <form method="POST" action="{% url 'add_to_cart' item.id %}" class="mt-8">
          {% csrf_token %}
          <div class="flex items-center text-gray-600">
            <button type="button" id="decrease" class="px-2 bg-gray-200 text-2xl text-black">-</button>
            <input type="number" id="quantity" name="quantity" value="1" min="1" class="w-12 md:w-16 h-10 md:h-12 text-center bg-gray-100" readonly>
            <button type="button" id="increase" class="px-2 bg-gray-200 text-2l text-black">+</button>
          </div>
          <button class="mt-4 text-white w-full bg-black text-lg md:text-xl font-bold py-3">Buy Now</button>
        </form>

        <!-- Secure Checkout -->
        <h2 class="font-bold text-lg md:text-xl mt-6">Guaranteed Safe Checkout</h2>
        <img class="mt-2 w-40 md:w-48 lg:w-56" src="https://i.postimg.cc/wMRK94bc/Screenshot-2024-10-26-014120.png" alt="Safe Checkout Image">
      </div>
    </div>

    <!-- Description Section -->
    <div class="mt-12 md:mt-20 text-start">
      <a class="text-xl md:text-2xl font-semibold border-b-2 border-black pb-2" href="#">Description</a>
    </div>
    <p class="text-lg mt-8 px-4 md:px-10 lg:px-20 text-gray-700">
      {{ item.description }}
    </p>

    <!-- Additional Images Section -->
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 md:gap-8 lg:gap-10 mt-12 md:mt-16 px-4 md:px-10">
      <img class="w-full h-48 md:h-64 object-cover rounded" src="{{item.desimage1.url}}" alt="">
      <img class="w-full h-48 md:h-64 object-cover rounded" src="{{item.desimage2.url}}" alt="">
      <img class="w-full h-48 md:h-64 object-cover rounded" src="{{item.desimage3.url}}" alt="">
    </div>
    
  </div>
</section>
<style>
  #mainImageContainer {
      width: 300%; 
      
      display: flex; 
      transition: transform 0.5s ease; 
  }
  .main-image {
      width: 33%;
      flex-shrink: 0; 
      margin-right:40px
  }
</style>

<script>
  const thumbnails = document.querySelectorAll('.thumbnail');
  const mainImageContainer = document.getElementById('mainImageContainer');
  let currentIndex = 0;

  function updateMainImage(index) {
      mainImageContainer.style.transform = `translateX(-${index * (100 / thumbnails.length)}%)`;
  }

  document.getElementById('prev').addEventListener('click', () => {
      currentIndex = (currentIndex - 1 + thumbnails.length) % thumbnails.length;
      updateMainImage(currentIndex);
  });

  document.getElementById('next').addEventListener('click', () => {
      currentIndex = (currentIndex + 1) % thumbnails.length;
      updateMainImage(currentIndex);
  });

  thumbnails.forEach((thumbnail, index) => {
      thumbnail.addEventListener('click', () => {
          currentIndex = index;  // Set currentIndex to the thumbnail index
          updateMainImage(currentIndex);
      });
  });

  // Initialize the main image to the first thumbnail on load
  updateMainImage(currentIndex);
</script>
{% endblock %}
{% block scripts %}
<script>
  
    document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM fully loaded and parsed');

        const quantityInput = document.getElementById('quantity');
        const increaseButton = document.getElementById('increase');
        const decreaseButton = document.getElementById('decrease');

     
        increaseButton.addEventListener('click', function() {
            let currentValue = parseInt(quantityInput.value);
            console.log('Increase button clicked. Current value before increase:', currentValue);
            // Increase by 1
            quantityInput.value = currentValue + 1;
            console.log('Current value after increase:', quantityInput.value);
        });

     
        decreaseButton.addEventListener('click', function() {
            let currentValue = parseInt(quantityInput.value);
            console.log('Decrease button clicked. Current value before decrease:', currentValue);
    
            if (currentValue > 1) {
    
                quantityInput.value = currentValue - 1;
                console.log('Current value after decrease:', quantityInput.value);
            } else {
                console.log('Quantity cannot go below 1');
            }
        });
    });
</script>
{% endblock %}